# Default values for metrics-dashboard
replicaCount: 1

image:
  repository: metrics-dashboard
  tag: v2
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80
  targetPort: 80

ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
  hosts:
    - host: metrics-dashboard.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 500m
    memory: 512Mi

nodeSelector: {}
tolerations: []
affinity: {}

# Single-pod configuration
singlePod:
  enabled: true
  frontend:
    port: 80
  backend:
    port: 3000
    nodeEnv: production
  database:
    type: embedded
    embedded:
      enabled: true
      port: 5432
      database: metrics_dashboard
      username: postgres
      password: postgres123
    external:
      enabled: false
      host: ""
      port: 5432
      database: metrics_dashboard
      username: ""
      password: ""

# Secrets
secrets:
  dbPassword: postgres123
  jwtSecret: metrics-dashboard-super-secret-jwt-key-change-in-production
  jira:
    baseUrl: "https://enterprisevm.atlassian.net"
    email: "alok.kulkarni@virginmoney.com"
    apiToken: "ATATT3xFfGF0yel0txV-Xu1Ccb47uCLpgp_g0W6CJOLp-w6kr-eFmKrkkwFV7D5cHf3dJrDTOEOHUCLH_F3SHFIycfV8UbAtiAiPcSiOAxr2xAxMyJjMNzHaxImqLLgc99byjBjroNsI68cV3T3OfyD9WnmHXwyLKEyBN2dZiv3WThTNb16U5-E=9FFBF201"


# Environment variables
env:
  NODE_ENV: production
  PORT: "3000"
  LOG_LEVEL: info
  LOG_FILE: /var/log/app.log
  FRONTEND_URL: http://localhost
  ALLOWED_ORIGINS: "http://localhost,http://localhost:3000,http://localhost:80,http://localhost:8080,http://localhost:8081,http://localhost:8082,http://localhost:8083,http://metrics-dashboard.local,https://metrics-dashboard.local"
  CORS_ORIGIN: "http://localhost,http://localhost:3000,http://localhost:80,http://localhost:8080,http://localhost:8081,http://localhost:8082,http://localhost:8083,http://metrics-dashboard.local,https://metrics-dashboard.local"
  DB_HOST: localhost
  DB_PORT: "5432"
  DB_NAME: metrics_dashboard
  DB_USER: postgres
  DB_SSL: "false"
  DATABASE_URL: "postgresql://postgres:postgres123@localhost:5432/metrics_dashboard"
  JWT_EXPIRES_IN: 24h
  RATE_LIMIT_WINDOW_MS: "900000"
  RATE_LIMIT_MAX_REQUESTS: "100"
  JIRA_SYNC_INTERVAL_HOURS: "2"
  JIRA_AUTO_SYNC_ENABLED: "true"
  CONCURRENT_SYNC_ENABLED: "true"
  SYNC_MAX_WORKERS: "4"
  SYNC_MAX_CONCURRENT_BOARDS: "8"
  SYNC_BATCH_SIZE: "5"
  SYNC_DELAY_BETWEEN_BATCHES: "2000"
  SYNC_CONCURRENT_THRESHOLD: "20"
  SYNC_INTERVAL_HOURS: "24"
  MAX_CONCURRENT_SYNC: "5"
  SYNC_TIMEOUT_MS: "300000"

# Persistence
persistence:
  enabled: true
  accessMode: ReadWriteOnce
  size: 8Gi
  storageClass: ""

# Autoscaling
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80

# Service account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Pod security context
podSecurityContext:
  fsGroup: 1000
